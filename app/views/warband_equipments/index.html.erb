<% content_for(:body_class) { "bg-stone-950" } %>
<% content_for(:raw_content) { true } %>

<%= render layout: "shared/dark_layout" do %>
  <!-- Back link -->
  <%= link_to warband_warband_member_path(@warband_member.warband, @warband_member), class: "inline-flex items-center gap-2 text-amber-400 hover:text-amber-300 transition-colors mb-6", style: "font-family: 'Cinzel', serif; font-size: 0.75rem; letter-spacing: 0.1em; text-transform: uppercase;" do %>
    <svg viewBox="0 0 24 24" class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
    <%= @warband_member.name %>
  <% end %>

  <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4">
    <div>
      <div class="flex items-center gap-4 mb-3">
        <div class="h-px w-8 bg-gradient-to-r from-transparent to-amber-700/60"></div>
        <svg viewBox="0 0 24 24" class="w-4 h-4 text-amber-600/60" fill="currentColor">
          <polygon points="12,2 15,9 22,9 16,14 18,21 12,17 6,21 8,14 2,9 9,9"/>
        </svg>
        <div class="h-px w-8 bg-gradient-to-l from-transparent to-amber-700/60"></div>
      </div>
      <h1 class="text-amber-100 tracking-[0.1em] uppercase" style="font-family: 'Cinzel', serif; font-size: 1.6rem; font-weight: 700;">
        Equipo de <%= @warband_member.name %>
      </h1>
      <p class="text-stone-400 mt-2" style="font-family: 'Crimson Text', serif;">
        <%= @warband_member.display_type %> de <%= @warband_member.warband.name %>
      </p>
    </div>
    <%= link_to new_warband_warband_member_warband_equipment_path(@warband_member.warband, @warband_member), class: "px-5 py-2.5 bg-gradient-to-b from-amber-700 to-amber-900 text-amber-100 rounded border border-amber-600/50 hover:from-amber-600 hover:to-amber-800 transition-all shadow-lg shadow-amber-900/30", style: "font-family: 'Cinzel', serif; letter-spacing: 0.1em; text-transform: uppercase; font-size: 0.75rem;" do %>
      Anadir Equipo
    <% end %>
  </div>

  <% if @equipments.any? %>
    <div class="rounded-lg border border-amber-900/30 bg-gradient-to-b from-stone-900/80 to-stone-950/80 overflow-hidden">
      <div class="divide-y divide-stone-800/50">
        <% @equipments.each do |equipment| %>
          <div class="p-5 hover:bg-stone-800/20 transition-colors">
            <div class="flex items-center justify-between">
              <div class="flex-1">
                <div class="flex items-center justify-between">
                  <p class="text-amber-100 tracking-wider" style="font-family: 'Cinzel', serif; font-size: 1rem;">
                    <%= equipment.name %>
                  </p>
                  <span class="px-2 py-1 text-xs text-blue-300/80 border border-blue-900/30 rounded bg-blue-900/20 tracking-wider uppercase" style="font-family: 'Cinzel', serif; font-size: 0.6rem;">
                    <%= equipment.display_type %>
                  </span>
                </div>

                <% if equipment.description.present? %>
                  <p class="mt-2 text-stone-400 text-sm" style="font-family: 'Crimson Text', serif;">
                    <%= equipment.description %>
                  </p>
                <% end %>

                <div class="mt-2">
                  <p class="text-stone-500 text-sm" style="font-family: 'Crimson Text', serif;">
                    <span class="text-amber-600/70" style="font-family: 'Cinzel', serif; font-size: 0.7rem;">Coste:</span> <%= equipment.cost %> pts
                  </p>
                </div>

                <% if equipment.has_modifiers? %>
                  <div class="mt-2">
                    <p class="text-stone-400 text-sm" style="font-family: 'Crimson Text', serif;">
                      <span class="text-amber-600/70" style="font-family: 'Cinzel', serif; font-size: 0.7rem;">Modificadores:</span> <%= equipment.modifier_summary %>
                    </p>
                  </div>
                <% end %>
              </div>

              <div class="ml-4 flex-shrink-0 flex space-x-2">
                <%= link_to "Editar", edit_warband_warband_member_warband_equipment_path(@warband_member.warband, @warband_member, equipment),
                    class: "px-3 py-1.5 border border-amber-800/40 text-amber-400 rounded hover:bg-amber-900/20 hover:border-amber-700/50 transition-all",
                    style: "font-family: 'Cinzel', serif; font-size: 0.65rem; letter-spacing: 0.05em; text-transform: uppercase;" %>
                <%= button_to "Eliminar", warband_warband_member_warband_equipment_path(@warband_member.warband, @warband_member, equipment),
                    method: :delete,
                    data: { turbo_confirm: "Â¿Estas seguro de eliminar este equipo?" },
                    class: "px-3 py-1.5 border border-red-800/40 text-red-400 rounded hover:bg-red-900/20 hover:border-red-700/50 transition-all",
                    style: "font-family: 'Cinzel', serif; font-size: 0.65rem; letter-spacing: 0.05em; text-transform: uppercase;" %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  <% else %>
    <div class="rounded-lg border border-amber-900/30 bg-gradient-to-b from-stone-900/80 to-stone-950/80 p-12 text-center">
      <div class="w-16 h-16 mx-auto mb-5 rounded-full border border-amber-700/40 flex items-center justify-center bg-amber-900/20">
        <svg class="w-8 h-8 text-amber-500/60" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
        </svg>
      </div>
      <h3 class="text-amber-200/80 tracking-wider uppercase mb-2" style="font-family: 'Cinzel', serif; font-size: 0.85rem;">Sin equipo</h3>
      <p class="text-stone-500 text-sm mb-5" style="font-family: 'Crimson Text', serif;">Este miembro no tiene equipo asignado todavia.</p>
      <%= link_to "Anadir Equipo", new_warband_warband_member_warband_equipment_path(@warband_member.warband, @warband_member),
          class: "px-5 py-2.5 bg-gradient-to-b from-amber-700 to-amber-900 text-amber-100 rounded border border-amber-600/50 hover:from-amber-600 hover:to-amber-800 transition-all shadow-lg shadow-amber-900/30 inline-block",
          style: "font-family: 'Cinzel', serif; letter-spacing: 0.1em; text-transform: uppercase; font-size: 0.75rem;" %>
    </div>
  <% end %>
<% end %>
