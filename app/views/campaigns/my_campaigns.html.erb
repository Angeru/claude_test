<div class="max-w-6xl mx-auto">
  <div class="bg-white shadow-md rounded-lg px-8 pt-6 pb-8 mb-4">
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-2xl font-bold text-gray-800">Mis Campañas</h1>
      <div class="flex gap-4">
        <%= link_to "Crear Campaña", new_campaign_path, class: "bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-blue-500" %>
        <%= link_to "Ver Todas las Campañas", campaigns_path, class: "bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-green-500" %>
        <%= link_to "Volver al Dashboard", dashboard_path, class: "bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-gray-500" %>
      </div>
    </div>

    <% if @campaigns.any? %>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nombre</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Descripción</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Administrador</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Estado</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Período</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <% @campaigns.each do |campaign| %>
              <tr class="hover:bg-gray-50">
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"><%= campaign.name %></td>
                <td class="px-6 py-4 text-sm text-gray-500"><%= truncate(campaign.description, length: 80) %></td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><%= campaign.user.name %></td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <% if campaign.active? %>
                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Activa</span>
                  <% elsif campaign.paused? %>
                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Pausada</span>
                  <% else %>
                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">Finalizada</span>
                  <% end %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  <% if campaign.start_date && campaign.end_date %>
                    <%= l(campaign.start_date, format: :short) %> - <%= l(campaign.end_date, format: :short) %>
                  <% elsif campaign.start_date %>
                    Desde <%= l(campaign.start_date, format: :short) %>
                  <% elsif campaign.end_date %>
                    Hasta <%= l(campaign.end_date, format: :short) %>
                  <% else %>
                    Sin período definido
                  <% end %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <%= link_to "Ver", campaign_path(campaign), class: "text-blue-600 hover:text-blue-900 mr-3" %>
                  <% if campaign_owner?(campaign) %>
                    <%= link_to "Gestionar", manage_warbands_campaign_path(campaign), class: "text-purple-600 hover:text-purple-900 mr-3" %>
                  <% end %>
                  <%= button_to "Desuscribirse", unsubscribe_campaign_path(campaign), method: :delete, class: "text-red-600 hover:text-red-900 bg-transparent border-0 p-0 cursor-pointer", data: { turbo_confirm: "¿Estás seguro de desuscribirte de #{campaign.name}?" } %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

      <div class="mt-4 text-gray-600 text-sm">
        Total: <%= @campaigns.count %> campañas
      </div>
    <% else %>
      <div class="text-center py-12">
        <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
        </svg>
        <h3 class="mt-2 text-sm font-medium text-gray-900">No estás suscrito a ninguna campaña</h3>
        <p class="mt-1 text-sm text-gray-500">Comienza explorando las campañas disponibles o crea la tuya propia.</p>
        <div class="mt-6 flex gap-4 justify-center">
          <%= link_to "Crear Campaña", new_campaign_path, class: "inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" %>
          <%= link_to "Ver Campañas Disponibles", campaigns_path, class: "inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500" %>
        </div>
      </div>
    <% end %>
  </div>
</div>
