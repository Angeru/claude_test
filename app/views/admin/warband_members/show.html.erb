<% content_for(:body_class) { "bg-stone-950" } %>
<% content_for(:raw_content) { true } %>

<%= render layout: "shared/dark_layout" do %>
  <!-- Back link -->
  <%= link_to admin_warband_warband_members_path(@warband), class: "inline-flex items-center gap-2 text-amber-400 hover:text-amber-300 transition-colors mb-6", style: "font-family: 'Cinzel', serif; font-size: 0.75rem; letter-spacing: 0.1em; text-transform: uppercase;" do %>
    <svg viewBox="0 0 24 24" class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
    Volver a Miembros
  <% end %>

  <div class="mb-8">
    <div class="flex items-center gap-4 mb-3">
      <div class="h-px w-8 bg-gradient-to-r from-transparent to-amber-700/60"></div>
      <svg viewBox="0 0 24 24" class="w-4 h-4 text-amber-600/60" fill="currentColor">
        <polygon points="12,2 15,9 22,9 16,14 18,21 12,17 6,21 8,14 2,9 9,9"/>
      </svg>
      <div class="h-px w-8 bg-gradient-to-l from-transparent to-amber-700/60"></div>
    </div>
    <h1 class="text-amber-100 tracking-[0.1em] uppercase" style="font-family: 'Cinzel', serif; font-size: 1.6rem; font-weight: 700;">
      <%= @member.name %>
    </h1>
    <div class="flex gap-2 mt-3">
      <span class="px-2 py-1 text-xs tracking-wider uppercase rounded <%= @member.hero? ? 'text-amber-400/80 border border-amber-900/40 bg-amber-900/20' : 'text-stone-400/80 border border-stone-700/40 bg-stone-800/30' %>" style="font-family: 'Cinzel', serif; font-size: 0.6rem;">
        <%= @member.display_type %>
      </span>
      <span class="px-2 py-1 text-xs text-purple-400/80 border border-purple-900/40 rounded bg-purple-900/20" style="font-family: 'Cinzel', serif; font-size: 0.6rem; letter-spacing: 0.05em;">
        XP: <%= @member.experience %>
      </span>
    </div>
  </div>

  <!-- Stats Grid -->
  <div class="mb-8">
    <h2 class="text-amber-600/70 tracking-wider uppercase mb-4" style="font-family: 'Cinzel', serif; font-size: 0.85rem; letter-spacing: 0.1em;">Estadisticas</h2>
    <div class="grid grid-cols-3 gap-3">
      <% [
        ["Movimiento", @member.movimiento, '"'],
        ["Lucha", @member.lucha, '+'],
        ["Proyectiles", @member.proyectiles, '+'],
        ["Fuerza", @member.fuerza, ''],
        ["Defensa", @member.defensa, ''],
        ["Ataques", @member.ataques, ''],
        ["Heridas", @member.heridas, ''],
        ["Coraje", @member.coraje, ''],
        ["Inteligencia", @member.inteligencia, '']
      ].each do |label, value, suffix| %>
        <div class="bg-stone-800/50 border border-stone-700/30 p-3 rounded">
          <span class="font-semibold block text-amber-600/70 mb-1" style="font-family: 'Cinzel', serif; font-size: 0.6rem; letter-spacing: 0.1em; text-transform: uppercase;"><%= label %></span>
          <span class="text-stone-300 text-lg" style="font-family: 'Crimson Text', serif;"><%= value %><%= suffix %></span>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Hero Stats -->
  <% if @member.might > 0 || @member.will > 0 || @member.fate > 0 %>
    <div class="mb-8">
      <h2 class="text-amber-600/70 tracking-wider uppercase mb-4" style="font-family: 'Cinzel', serif; font-size: 0.85rem; letter-spacing: 0.1em;">Estadisticas de Heroe</h2>
      <div class="grid grid-cols-3 gap-3">
        <div class="bg-purple-900/20 border border-purple-800/30 p-3 rounded">
          <span class="font-semibold block text-purple-400/70 mb-1" style="font-family: 'Cinzel', serif; font-size: 0.6rem; letter-spacing: 0.1em; text-transform: uppercase;">Might</span>
          <span class="text-purple-200 text-lg" style="font-family: 'Crimson Text', serif;"><%= @member.might %></span>
        </div>
        <div class="bg-blue-900/20 border border-blue-800/30 p-3 rounded">
          <span class="font-semibold block text-blue-400/70 mb-1" style="font-family: 'Cinzel', serif; font-size: 0.6rem; letter-spacing: 0.1em; text-transform: uppercase;">Will</span>
          <span class="text-blue-200 text-lg" style="font-family: 'Crimson Text', serif;"><%= @member.will %></span>
        </div>
        <div class="bg-emerald-900/20 border border-emerald-800/30 p-3 rounded">
          <span class="font-semibold block text-emerald-400/70 mb-1" style="font-family: 'Cinzel', serif; font-size: 0.6rem; letter-spacing: 0.1em; text-transform: uppercase;">Fate</span>
          <span class="text-emerald-200 text-lg" style="font-family: 'Crimson Text', serif;"><%= @member.fate %></span>
        </div>
      </div>
    </div>
  <% end %>

  <!-- Equipment Section -->
  <div class="mb-8">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-amber-600/70 tracking-wider uppercase" style="font-family: 'Cinzel', serif; font-size: 0.85rem; letter-spacing: 0.1em;">Equipo (<%= @member.warband_equipments.count %>)</h2>
      <%= link_to "Gestionar Equipo", admin_warband_warband_member_warband_equipments_path(@warband, @member),
          class: "px-4 py-2 bg-gradient-to-b from-emerald-700 to-emerald-900 text-emerald-100 rounded border border-emerald-600/50 hover:from-emerald-600 hover:to-emerald-800 transition-all",
          style: "font-family: 'Cinzel', serif; letter-spacing: 0.1em; text-transform: uppercase; font-size: 0.65rem;" %>
    </div>
    <% if @member.warband_equipments.any? %>
      <div class="rounded-lg border border-amber-900/30 bg-gradient-to-b from-stone-900/80 to-stone-950/80 p-5">
        <div class="flex flex-wrap gap-2">
          <% @member.warband_equipments.each do |equipment| %>
            <span class="px-3 py-1.5 text-sm text-blue-300/80 border border-blue-900/30 rounded bg-blue-900/15" style="font-family: 'Crimson Text', serif;">
              <%= equipment.name %>
            </span>
          <% end %>
        </div>
      </div>
    <% else %>
      <div class="rounded-lg border border-amber-900/30 bg-gradient-to-b from-stone-900/80 to-stone-950/80 p-8 text-center">
        <div class="w-12 h-12 mx-auto mb-3 rounded-full border border-blue-700/40 flex items-center justify-center bg-blue-900/20">
          <svg class="w-6 h-6 text-blue-500/60" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
          </svg>
        </div>
        <p class="text-stone-500 text-sm mb-4" style="font-family: 'Crimson Text', serif;">Este miembro no tiene equipo asignado.</p>
        <%= link_to "Anadir Equipo", admin_warband_warband_member_warband_equipments_path(@warband, @member),
            class: "text-emerald-400/80 hover:text-emerald-300 text-sm transition-colors tracking-wider uppercase",
            style: "font-family: 'Cinzel', serif; font-size: 0.7rem;" %>
      </div>
    <% end %>
  </div>

  <!-- Skills Section -->
  <div class="mb-8">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-amber-600/70 tracking-wider uppercase" style="font-family: 'Cinzel', serif; font-size: 0.85rem; letter-spacing: 0.1em;">Skills (<%= @member.warband_skills.count %>)</h2>
      <%= link_to "Gestionar Skills", admin_warband_warband_member_warband_skills_path(@warband, @member),
          class: "px-4 py-2 bg-gradient-to-b from-purple-700 to-purple-900 text-purple-100 rounded border border-purple-600/50 hover:from-purple-600 hover:to-purple-800 transition-all",
          style: "font-family: 'Cinzel', serif; letter-spacing: 0.1em; text-transform: uppercase; font-size: 0.65rem;" %>
    </div>
    <% if @member.warband_skills.any? %>
      <div class="rounded-lg border border-amber-900/30 bg-gradient-to-b from-stone-900/80 to-stone-950/80 p-5">
        <div class="flex flex-wrap gap-2">
          <% @member.warband_skills.each do |skill| %>
            <span class="px-3 py-1.5 text-sm text-purple-300/80 border border-purple-900/30 rounded bg-purple-900/15" style="font-family: 'Crimson Text', serif;">
              <%= skill.name %>
            </span>
          <% end %>
        </div>
      </div>
    <% else %>
      <div class="rounded-lg border border-amber-900/30 bg-gradient-to-b from-stone-900/80 to-stone-950/80 p-8 text-center">
        <div class="w-12 h-12 mx-auto mb-3 rounded-full border border-purple-700/40 flex items-center justify-center bg-purple-900/20">
          <svg class="w-6 h-6 text-purple-500/60" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
          </svg>
        </div>
        <p class="text-stone-500 text-sm mb-4" style="font-family: 'Crimson Text', serif;">Este miembro no tiene skills asignadas.</p>
        <%= link_to "Anadir Skill", admin_warband_warband_member_warband_skills_path(@warband, @member),
            class: "text-purple-400/80 hover:text-purple-300 text-sm transition-colors tracking-wider uppercase",
            style: "font-family: 'Cinzel', serif; font-size: 0.7rem;" %>
      </div>
    <% end %>
  </div>

  <!-- Actions Section -->
  <div class="flex flex-wrap gap-3 pt-6 border-t border-stone-800/50">
    <%= link_to "Editar Miembro", edit_admin_warband_warband_member_path(@warband, @member),
        class: "px-5 py-2.5 bg-gradient-to-b from-amber-700 to-amber-900 text-amber-100 rounded border border-amber-600/50 hover:from-amber-600 hover:to-amber-800 transition-all",
        style: "font-family: 'Cinzel', serif; letter-spacing: 0.1em; text-transform: uppercase; font-size: 0.75rem;" %>
    <%= button_to "Eliminar Miembro", admin_warband_warband_member_path(@warband, @member),
        method: :delete,
        data: { turbo_confirm: "Â¿Estas seguro de eliminar a #{@member.name}?" },
        class: "px-5 py-2.5 border border-red-800/40 text-red-400 rounded hover:bg-red-900/20 hover:border-red-700/50 transition-all",
        style: "font-family: 'Cinzel', serif; letter-spacing: 0.1em; text-transform: uppercase; font-size: 0.75rem;" %>
  </div>
<% end %>
